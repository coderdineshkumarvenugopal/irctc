import{T as w,j as e,I as m,R as b,r as j,bm as v,B as N}from"./index-D3J2a6fV.js";import{T as k,a as A}from"./row-CH5HzoCE.js";import{A as T,P as C,T as I,D as L}from"./TicketConformation-BcfAOM0A.js";const $="/images/coach/engine.svg",u="/images/coach/carrage.svg",E=()=>{const{Text:s}=w,a=[{key:"1",label:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(m,{className:"h-10 w-20",src:$}),e.jsx(s,{className:"flex justify-center items-center",children:"Engine"})]}),children:"",disabled:!0},{key:"2",label:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(m,{className:"h-10 w-20",src:u}),e.jsx(s,{className:"flex justify-center items-center",children:"C1"})]}),children:""},{key:"3",label:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(m,{className:"h-10 w-20",src:u}),e.jsx(s,{className:"flex justify-center items-center",children:"C2"})]}),children:""},{key:"4",label:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(m,{className:"h-10 w-20",src:u}),e.jsx(s,{className:"flex justify-center items-center",children:"C3"})]}),children:""},{key:"5",label:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(m,{className:"h-10 w-20",src:u}),e.jsx(s,{className:"flex justify-center items-center",children:"S1"})]}),children:""},{key:"6",label:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(m,{className:"h-10 w-20",src:u}),e.jsx(s,{className:"flex justify-center items-center",children:"S2"})]}),children:""},{key:"7",label:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(m,{className:"h-10 w-20",src:u}),e.jsx(s,{className:"flex justify-center items-center",children:"S3"})]}),children:""}];return e.jsx(k,{items:a})},B=[{id:"S1-1",number:"S1",type:"lower",status:"available",fare:450,position:{row:1,col:1}},{id:"S1-2",number:"S2",type:"middle",status:"available",fare:450,position:{row:1,col:1}},{id:"S1-3",number:"S3",type:"upper",status:"booked",fare:450,position:{row:1,col:1}},{id:"S1-4",number:"S4",type:"lower",status:"available",fare:450,position:{row:1,col:2}},{id:"S1-5",number:"S5",type:"middle",status:"ladies",fare:450,position:{row:1,col:2}},{id:"S1-6",number:"S6",type:"upper",status:"available",fare:450,position:{row:1,col:2}},{id:"S1-7",number:"S7",type:"side-lower",status:"available",fare:450,position:{row:1,col:3}},{id:"S1-8",number:"S8",type:"side-upper",status:"booked",fare:450,position:{row:1,col:3}},{id:"S1-9",number:"S9",type:"lower",status:"available",fare:450,position:{row:2,col:1}},{id:"S1-10",number:"S10",type:"middle",status:"booked",fare:450,position:{row:2,col:1}},{id:"S1-11",number:"S11",type:"upper",status:"available",fare:450,position:{row:2,col:1}},{id:"S1-12",number:"S12",type:"lower",status:"ladies",fare:450,position:{row:2,col:2}},{id:"S1-13",number:"S13",type:"middle",status:"available",fare:450,position:{row:2,col:2}},{id:"S1-14",number:"S14",type:"upper",status:"available",fare:450,position:{row:2,col:2}},{id:"S1-15",number:"S15",type:"side-lower",status:"available",fare:450,position:{row:2,col:3}},{id:"S1-16",number:"S16",type:"side-upper",status:"available",fare:450,position:{row:2,col:3}},{id:"A1-1",number:"A1",type:"lower",status:"available",fare:950,position:{row:1,col:1}},{id:"A1-2",number:"A2",type:"middle",status:"available",fare:950,position:{row:1,col:1}},{id:"A1-3",number:"A3",type:"upper",status:"booked",fare:950,position:{row:1,col:1}},{id:"A1-4",number:"A4",type:"lower",status:"available",fare:950,position:{row:1,col:2}},{id:"A1-5",number:"A5",type:"middle",status:"ladies",fare:950,position:{row:1,col:2}},{id:"A1-6",number:"A6",type:"upper",status:"available",fare:950,position:{row:1,col:2}},{id:"A1-7",number:"A7",type:"side-lower",status:"available",fare:950,position:{row:1,col:3}},{id:"A1-8",number:"A8",type:"side-upper",status:"booked",fare:950,position:{row:1,col:3}}],O=()=>{const s=[{status:"available",label:"Available",color:"bg-white border border-gray-300"},{status:"booked",label:"Booked",color:"bg-gray-400 opacity-60"},{status:"ladies",label:"Ladies",color:"bg-pink-200"},{status:"selected",label:"Selected",color:"bg-green-500 text-white"}];return e.jsxs("div",{className:"seat-legend",children:[e.jsx("h3",{className:"text-md font-medium mb-2",children:"Legend"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map((a,l)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-6 h-6 ${a.color} rounded-md shadow-sm mr-2`}),e.jsx("span",{className:"text-sm text-gray-700",children:a.label})]},l))})]})},h=s=>{let a;const l=new Set,i=(o,d)=>{const x=typeof o=="function"?o(a):o;if(!Object.is(x,a)){const y=a;a=d??(typeof x!="object"||x===null)?x:Object.assign({},a,x),l.forEach(g=>g(a,y))}},r=()=>a,t={setState:i,getState:r,getInitialState:()=>p,subscribe:o=>(l.add(o),()=>l.delete(o))},p=a=s(i,r,t);return t},P=s=>s?h(s):h,D=s=>s;function R(s,a=D){const l=b.useSyncExternalStore(s.subscribe,()=>a(s.getState()),()=>a(s.getInitialState()));return b.useDebugValue(l),l}const S=s=>{const a=P(s),l=i=>R(a,i);return Object.assign(l,a),l},M=s=>s?S(s):S,U=M((s,a)=>({selectedSeats:[],selectSeat:(l,i)=>{s(r=>({selectedSeats:[...r.selectedSeats,{...l,status:"selected",gender:i}]}))},unselectSeat:l=>{s(i=>({selectedSeats:i.selectedSeats.filter(r=>r.id!==l)}))},updateSeatGender:(l,i)=>{s(r=>({selectedSeats:r.selectedSeats.map(c=>c.id===l?{...c,gender:i}:c)}))},getTotalFare:()=>{const{selectedSeats:l}=a();return l.reduce((i,r)=>i+r.fare,0)},resetSelection:()=>{s({selectedSeats:[]})}})),f=({seat:s})=>{const{selectedSeats:a,selectSeat:l,unselectSeat:i}=U(),[r,c]=j.useState(!1),n=a.some(o=>o.id===s.id),t=()=>{s.status==="booked"||s.status==="ladies"||(n?i(s.id):l(s))},p=()=>n?"bg-green-500 text-white":s.status==="booked"?"bg-gray-400 text-gray-700 opacity-60":s.status==="ladies"?"bg-pink-200 text-pink-800":s.type==="window"?"bg-blue-100 text-blue-800":s.type==="aisle"?"bg-purple-100 text-purple-800":"bg-white text-gray-800";return e.jsx(v,{title:`${s.type.charAt(0).toUpperCase()+s.type.slice(1)} Seat: â‚¹${s.fare}`,placement:"top",open:r,children:e.jsx("div",{className:`seat relative flex items-center justify-center
           w-12 h-10 
          ${p()}
          border rounded-md transition-all duration-200
          ${r&&s.status!=="booked"?"scale-105 shadow-md":"shadow-sm"}
          ${s.status!=="booked"&&s.status!=="ladies"?"cursor-pointer":"cursor-not-allowed"}`,onClick:t,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:e.jsx("span",{className:"text-xs font-medium",children:s.number})})})},G=({seatsData:s})=>{const a={};s.forEach(i=>{const r=String(i.number).replace(/\d+/g,"");a[r]||(a[r]=[]),a[r].push(i)});const l=i=>{const r={};return i.forEach(c=>{if(c.position){const{row:n}=c.position;r[n]||(r[n]=[]),r[n].push(c)}}),Object.entries(r).sort(([c],[n])=>parseInt(c)-parseInt(n))};return e.jsx("div",{className:"train-layout ",children:Object.entries(a).map(([i,r])=>e.jsx("div",{className:"compartment mb-8",children:e.jsx("div",{className:"grid grid-cols-1 gap-6",children:l(r).map(([c,n])=>e.jsxs("div",{className:"berth-group flex",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 p-2 border border-gray-200 rounded-md",children:[e.jsx("div",{className:"flex gap-3",children:n.filter(t=>t.type==="lower").sort((t,p)=>{var o,d;return(((o=t.position)==null?void 0:o.col)||0)-(((d=p.position)==null?void 0:d.col)||0)}).map(t=>e.jsxs("div",{className:"relative",children:[e.jsx(f,{seat:t}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 block text-center",children:"Lower"})]},t.id))}),e.jsx("div",{className:"flex gap-3",children:n.filter(t=>t.type==="middle"||t.type==="middle-upper").sort((t,p)=>{var o,d;return(((o=t.position)==null?void 0:o.col)||0)-(((d=p.position)==null?void 0:d.col)||0)}).map(t=>e.jsxs("div",{className:"relative",children:[e.jsx(f,{seat:t}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 block text-center",children:"Middle"})]},t.id))}),e.jsx("div",{className:"flex gap-3",children:n.filter(t=>t.type==="upper").sort((t,p)=>{var o,d;return(((o=t.position)==null?void 0:o.col)||0)-(((d=p.position)==null?void 0:d.col)||0)}).map(t=>e.jsxs("div",{className:"relative",children:[e.jsx(f,{seat:t}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 block text-center",children:"Upper"})]},t.id))})]}),e.jsx("div",{className:"ml-6 flex flex-col gap-3",children:n.filter(t=>t.type==="side-lower"||t.type==="side-upper").sort(t=>t.type==="side-lower"?-1:1).map(t=>e.jsxs("div",{className:"relative",children:[e.jsx(f,{seat:t}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 block text-center",children:t.type==="side-lower"?"Side Lower":"Side Upper"})]},t.id))})]},`${i}-${c}`))})},i))})},H=({seatsData:s})=>{const[a,l]=j.useState("");return e.jsx(A,{title:"Train Seat Layout",variant:"outlined",className:"",children:e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx(T,{message:"Seat Selection Information",description:"Hover over a seat to see its fare. Click to select. Train direction is to the left.",type:"info",showIcon:!0,className:"mb-4"}),e.jsxs("div",{className:"flex flex-row justify-around",children:[e.jsx(G,{seatsData:s}),e.jsxs("div",{className:"",children:[a==="Payment"&&e.jsx(C,{}),a==="confirmed"&&e.jsx(I,{})]})]}),e.jsx(N,{type:"primary",className:"inherit",disabled:!s,onClick:()=>l(a==="confirmed"?"Payment":"confirmed"),children:"Book Now"}),e.jsx(L,{className:"my-4"}),e.jsx(O,{})]})})},z=()=>e.jsxs("div",{className:"p-10 flex-row gap-6 ",children:[e.jsx(E,{}),e.jsx("div",{className:"",children:e.jsx(H,{seatsData:B})})]});export{z as default};
